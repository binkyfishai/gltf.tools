<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <title>Three.js glTF Shader Studio - Windows XP Style</title>
    <link rel="icon" href="favicon.svg" type="image/svg+xml" />
    <script>
    // Browser check - prevent server-side rendering issues
    if (typeof window === 'undefined' || typeof document === 'undefined') {
      console.log('Running in a non-browser environment, skipping initialization');
    }
    </script>
    <!-- Vite will automatically inject the compiled JavaScript -->
    <style>
        body { 
            margin: 0; 
            overflow: hidden; 
            background: #3a6ea5;
            font-family: "Tahoma", sans-serif;
            font-size: 11px;
            padding-bottom: 40px; /* Account for taskbar */
        }
        
        #ui {
            position: absolute;
            top: 10px;
            left: 10px;
            width: 420px;
            max-height: calc(100vh - 90px); /* Account for taskbar */
            background: #ece9d8;
            border: 2px outset #ece9d8;
            font-family: "Tahoma", sans-serif;
            box-shadow: 2px 2px 5px rgba(0,0,0,0.3);
            overflow-y: auto;
            min-width: 280px;
            max-width: 60vw;
            resize: none;
        }
        
        #gltf-ui {
            position: absolute;
            top: 10px;
            right: 10px;
            width: 380px;
            max-height: calc(100vh - 90px); /* Account for taskbar */
            background: #ece9d8;
            border: 2px outset #ece9d8;
            font-family: "Tahoma", sans-serif;
            box-shadow: 2px 2px 5px rgba(0,0,0,0.3);
            overflow-y: auto;
            min-width: 280px;
            max-width: 60vw;
            resize: none;
        }
        
        .resize-handle {
            position: absolute;
            background: transparent;
            z-index: 1000;
        }
        
        .resize-handle-right {
            top: 0;
            right: -5px;
            width: 10px;
            height: 100%;
            cursor: ew-resize;
        }
        
        .resize-handle-left {
            top: 0;
            left: -5px;
            width: 10px;
            height: 100%;
            cursor: ew-resize;
        }
        
        .resize-handle-bottom {
            bottom: -5px;
            left: 0;
            width: 100%;
            height: 10px;
            cursor: ns-resize;
        }
        
        .resize-handle-corner {
            bottom: -5px;
            right: -5px;
            width: 15px;
            height: 15px;
            cursor: nw-resize;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="15" height="15"><path d="M15,0 L15,15 L0,15 Z" fill="%23999"/><path d="M11,4 L11,11 L4,11 Z" fill="%23fff"/></svg>');
        }
        
        .resize-handle:hover {
            background-color: rgba(0, 84, 227, 0.2);
        }
        
        .resizing {
            user-select: none;
            pointer-events: none;
        }
        
        .resizing * {
            user-select: none;
            pointer-events: none;
        }
        
        /* Custom Windows XP-style Scrollbars */
        #ui, #gltf-ui {
            scrollbar-width: thin;
            scrollbar-color: #d6d3ce #ece9d8;
        }
        
        #ui::-webkit-scrollbar, #gltf-ui::-webkit-scrollbar {
            width: 16px;
            height: 16px;
        }
        
        #ui::-webkit-scrollbar-track, #gltf-ui::-webkit-scrollbar-track {
            background: #ece9d8;
            border: 1px inset #ece9d8;
        }
        
        #ui::-webkit-scrollbar-thumb, #gltf-ui::-webkit-scrollbar-thumb {
            background: linear-gradient(to bottom, #ece9d8 0%, #d6d3ce 50%, #c0c0c0 100%);
            border: 1px outset #ece9d8;
            border-radius: 0;
        }
        
        #ui::-webkit-scrollbar-thumb:hover, #gltf-ui::-webkit-scrollbar-thumb:hover {
            background: linear-gradient(to bottom, #f0f0f0 0%, #e0e0e0 50%, #d0d0d0 100%);
        }
        
        #ui::-webkit-scrollbar-thumb:active, #gltf-ui::-webkit-scrollbar-thumb:active {
            background: linear-gradient(to bottom, #d0d0d0 0%, #c0c0c0 50%, #b0b0b0 100%);
            border: 1px inset #ece9d8;
        }
        
        #ui::-webkit-scrollbar-button, #gltf-ui::-webkit-scrollbar-button {
            background: linear-gradient(to bottom, #ece9d8 0%, #d6d3ce 100%);
            border: 1px outset #ece9d8;
            height: 16px;
            width: 16px;
        }
        
        #ui::-webkit-scrollbar-button:hover, #gltf-ui::-webkit-scrollbar-button:hover {
            background: linear-gradient(to bottom, #f0f0f0 0%, #e0e0e0 100%);
        }
        
        #ui::-webkit-scrollbar-button:active, #gltf-ui::-webkit-scrollbar-button:active {
            border: 1px inset #ece9d8;
        }
        
        #ui::-webkit-scrollbar-button:vertical:start:decrement {
            background-image: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16"><path d="M8,4 L12,10 L4,10 Z" fill="%23333"/></svg>');
            background-repeat: no-repeat;
            background-position: center;
        }
        
        #ui::-webkit-scrollbar-button:vertical:end:increment {
            background-image: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16"><path d="M8,12 L4,6 L12,6 Z" fill="%23333"/></svg>');
            background-repeat: no-repeat;
            background-position: center;
        }
        
        #gltf-ui::-webkit-scrollbar-button:vertical:start:decrement {
            background-image: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16"><path d="M8,4 L12,10 L4,10 Z" fill="%23333"/></svg>');
            background-repeat: no-repeat;
            background-position: center;
        }
        
        #gltf-ui::-webkit-scrollbar-button:vertical:end:increment {
            background-image: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16"><path d="M8,12 L4,6 L12,6 Z" fill="%23333"/></svg>');
            background-repeat: no-repeat;
            background-position: center;
        }
        
        /* Hide scrollbars on mobile for cleaner look */
        @media screen and (max-width: 768px) {
            #ui, #gltf-ui {
                scrollbar-width: none;
                -ms-overflow-style: none;
            }
            
            #ui::-webkit-scrollbar, #gltf-ui::-webkit-scrollbar {
                display: none;
            }
        }
        
        /* Better overflow management */
        .content {
            padding-right: 8px; /* Account for scrollbar */
        }
        
        .collapsible-content {
            padding-right: 5px;
        }
        
        .collapsible {
            cursor: pointer;
            user-select: none;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }
        
        .collapsible::after {
            content: "‚ñº";
            font-size: 8px;
            margin-left: 5px;
            transition: transform 0.2s;
        }
        
        .collapsible.collapsed::after {
            transform: rotate(-90deg);
        }
        
        .collapsible-content {
            overflow: hidden;
            transition: max-height 0.3s ease-out;
        }
        
        .collapsible-content.collapsed {
            max-height: 0;
        }
        
        /* Compact mode toggle */
        .compact-mode #ui,
        .compact-mode #gltf-ui {
            font-size: 10px;
        }
        
        .compact-mode .section {
            margin-bottom: 6px;
            padding: 3px;
        }
        
        .compact-mode .info-box {
            padding: 3px;
            margin: 3px 0;
        }
        
        .compact-mode .shader-editor textarea {
            height: 100px;
        }
        
        .compact-mode .material-list {
            max-height: 80px;
        }
        
        /* Auto-compact on smaller screens */
        @media screen and (max-height: 800px) {
            body {
                font-size: 10px;
            }
            
            .section {
                margin-bottom: 6px;
                padding: 3px;
            }
            
            .info-box {
                padding: 3px;
                margin: 3px 0;
            }
            
            .shader-editor textarea {
                height: 100px;
            }
            
            .material-list {
                max-height: 80px;
            }
        }
        
        .title-bar {
            background: linear-gradient(to bottom, #0054e3 0%, #0040dc 50%, #0030d8 51%, #0054e3 100%);
            color: white;
            padding: 3px 5px;
            font-weight: bold;
            font-size: 11px;
            border-bottom: 1px solid #316ac5;
            position: relative;
        }
        
        .title-bar::before {
            content: "üñ•Ô∏è";
            margin-right: 5px;
        }
        
        .window-buttons {
            position: absolute;
            right: 3px;
            top: 2px;
        }
        
        .window-button {
            display: inline-block;
            width: 16px;
            height: 14px;
            background: #ece9d8;
            border: 1px outset #ece9d8;
            margin-left: 2px;
            text-align: center;
            line-height: 12px;
            font-size: 8px;
            cursor: pointer;
            color: black;
        }
        
        .window-button:hover {
            background: #ddd;
        }
        
        .content {
            padding: 8px;
            background: #ece9d8;
        }
        
        .section {
            margin-bottom: 8px;
            border: 1px inset #ece9d8;
            padding: 4px;
            background: #f1f0e7;
        }
        
        .section-title {
            font-weight: bold;
            color: #0054e3;
            margin-bottom: 5px;
            font-size: 11px;
        }
        
        textarea {
            width: 100%;
            height: 120px;
            display: block;
            margin-top: 5px;
            background: white;
            color: black;
            border: 2px inset #ece9d8;
            resize: none;
            font-family: "Courier New", monospace;
            font-size: 10px;
            padding: 3px;
            box-sizing: border-box;
        }
        
        textarea:focus {
            background: #fff;
            outline: none;
            border: 2px inset #316ac5;
        }
        
        .button {
            background: linear-gradient(to bottom, #ece9d8 0%, #d6d3ce 100%);
            border: 1px outset #ece9d8;
            padding: 2px 8px;
            font-family: "Tahoma", sans-serif;
            font-size: 11px;
            cursor: pointer;
            margin: 2px;
        }
        
        .button:hover {
            background: linear-gradient(to bottom, #f0f0f0 0%, #e0e0e0 100%);
        }
        
        .button:active {
            border: 1px inset #ece9d8;
        }
        
        .status-bar {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            height: 20px;
            background: #ece9d8;
            border-top: 1px solid #aaa;
            padding: 3px 5px;
            font-size: 10px;
            color: #333;
        }
        
        .shader-error {
            background: #ffeeee;
            border: 1px solid #ff6666;
            color: #cc0000;
            padding: 3px;
            margin-top: 5px;
            font-size: 10px;
            display: none;
        }
        
        .info-box {
            background: #e6f3ff;
            border: 1px inset #ece9d8;
            padding: 4px;
            margin: 4px 0;
            font-size: 10px;
            color: #333;
        }
        
        .file-input {
            background: white;
            border: 2px inset #ece9d8;
            padding: 2px;
            font-family: "Tahoma", sans-serif;
            font-size: 10px;
            width: 100%;
            box-sizing: border-box;
        }
        
        .model-info {
            background: #f5f5f5;
            border: 1px inset #ece9d8;
            padding: 5px;
            margin: 5px 0;
            font-size: 10px;
            font-family: "Courier New", monospace;
        }
        
        .slider-container {
            margin: 5px 0;
        }
        
        .slider {
            width: 100%;
            height: 15px;
            background: #ddd;
            border: 1px inset #ece9d8;
            appearance: none;
        }
        
        .slider::-webkit-slider-thumb {
            appearance: none;
            width: 15px;
            height: 15px;
            background: #ece9d8;
            border: 1px outset #ece9d8;
            cursor: pointer;
        }
        
        .checkbox-container {
            margin: 3px 0;
            font-size: 10px;
        }
        
        .checkbox {
            margin-right: 5px;
        }
        
        .material-list {
            background: white;
            border: 2px inset #ece9d8;
            max-height: 120px;
            overflow-y: auto;
            margin: 5px 0;
            scrollbar-width: thin;
            scrollbar-color: #d6d3ce #fff;
        }
        
        .material-list::-webkit-scrollbar {
            width: 12px;
        }
        
        .material-list::-webkit-scrollbar-track {
            background: #f8f8f8;
            border: 1px inset #ece9d8;
        }
        
        .material-list::-webkit-scrollbar-thumb {
            background: linear-gradient(to bottom, #ece9d8 0%, #d6d3ce 100%);
            border: 1px outset #ece9d8;
            border-radius: 0;
        }
        
        .material-list::-webkit-scrollbar-thumb:hover {
            background: linear-gradient(to bottom, #f0f0f0 0%, #e0e0e0 100%);
        }
        
        .material-item {
            padding: 3px 5px;
            border-bottom: 1px solid #eee;
            cursor: pointer;
            font-size: 10px;
        }
        
        .material-item:hover {
            background: #e6f3ff;
        }
        
        .material-item.selected {
            background: #0054e3;
            color: white;
        }
        
        .animation-controls {
            text-align: center;
            padding: 5px;
            border: 1px inset #ece9d8;
            margin: 5px 0;
        }
        
        .small-button {
            background: linear-gradient(to bottom, #ece9d8 0%, #d6d3ce 100%);
            border: 1px outset #ece9d8;
            padding: 1px 6px;
            font-family: "Tahoma", sans-serif;
            font-size: 9px;
            cursor: pointer;
            margin: 1px;
        }
        
        .small-button:hover {
            background: linear-gradient(to bottom, #f0f0f0 0%, #e0e0e0 100%);
        }
        
        .small-button:active {
            border: 1px inset #ece9d8;
        }
        
        .drag-drop-zone {
            border: 2px dashed #999;
            background: #f8f8f8;
            padding: 20px;
            text-align: center;
            margin: 5px 0;
            border-radius: 4px;
            transition: all 0.3s ease;
            cursor: pointer;
        }
        
        .drag-drop-zone:hover,
        .drag-drop-zone.drag-over {
            border-color: #0054e3;
            background: #e6f3ff;
        }
        
        .drag-drop-zone .drop-text {
            font-size: 10px;
            color: #666;
            margin-top: 5px;
        }
        
        .control-group {
            display: flex;
            gap: 5px;
            align-items: center;
            margin: 3px 0;
            flex-wrap: wrap;
        }
        
        .control-group label {
            min-width: 60px;
            font-size: 10px;
        }
        
        .control-group input[type="range"] {
            flex: 1;
            min-width: 80px;
        }
        
        .control-group .value-display {
            min-width: 35px;
            text-align: right;
            font-size: 10px;
            font-weight: bold;
        }
        
        .quick-actions {
            display: flex;
            gap: 3px;
            margin: 5px 0;
            flex-wrap: wrap;
        }
        
        .quick-actions .small-button {
            flex: 1;
            min-width: 60px;
        }
        
        .shader-editor {
            position: relative;
        }
        
        .shader-editor textarea {
            height: 140px;
        }
        
        .expand-button {
            position: absolute;
            top: 5px;
            right: 5px;
            background: #ece9d8;
            border: 1px outset #ece9d8;
            width: 20px;
            height: 16px;
            font-size: 8px;
            cursor: pointer;
            z-index: 10;
        }
        
        .expand-button:hover {
            background: #ddd;
        }
        
        .expand-button:active {
            border: 1px inset #ece9d8;
        }
        
        .shader-editor.expanded textarea {
            height: 300px;
        }
        
        .panel-tabs {
            display: flex;
            border-bottom: 1px solid #999;
            margin-bottom: 5px;
        }
        
        .panel-tab {
            background: #d6d3ce;
            border: 1px outset #ece9d8;
            border-bottom: none;
            padding: 3px 8px;
            font-size: 10px;
            cursor: pointer;
            margin-right: 2px;
        }
        
        .panel-tab.active {
            background: #ece9d8;
            border: 1px inset #ece9d8;
            border-bottom: 1px solid #ece9d8;
        }
        
        .panel-tab:hover:not(.active) {
            background: #e0e0e0;
        }
        
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
        }
        
        .progress-bar {
            width: 100%;
            height: 12px;
            background: #ddd;
            border: 1px inset #ece9d8;
            margin: 5px 0;
            position: relative;
        }
        
        .progress-bar-fill {
            height: 100%;
            background: linear-gradient(to right, #0054e3, #316ac5);
            width: 0%;
            transition: width 0.3s ease;
        }
        
        .model-preview {
            background: #f0f0f0;
            border: 2px inset #ece9d8;
            height: 80px;
            margin: 5px 0;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 10px;
            color: #666;
        }
        
        /* Mobile Menu Toggle */
        .mobile-menu-toggle {
            display: none;
            position: fixed;
            top: 10px;
            left: 10px;
            z-index: 2000;
            background: #ece9d8;
            border: 2px outset #ece9d8;
            padding: 5px 10px;
            font-family: "Tahoma", sans-serif;
            font-size: 11px;
            cursor: pointer;
            box-shadow: 2px 2px 5px rgba(0,0,0,0.3);
        }
        
        .mobile-menu-toggle:hover {
            background: #ddd;
        }
        
        .mobile-menu-toggle:active {
            border: 2px inset #ece9d8;
        }
        
        /* Mobile Overlay */
        .mobile-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: 1500;
        }
        
        /* Responsive Styles */
        @media screen and (max-width: 1200px) {
            #ui {
                width: 360px;
                max-width: 45vw;
            }
            
            #gltf-ui {
                width: 340px;
                max-width: 45vw;
            }
        }
        
        @media screen and (max-width: 900px) {
            #ui {
                width: 320px;
                max-width: 40vw;
            }
            
            #gltf-ui {
                width: 300px;
                max-width: 40vw;
            }
            
            .shader-editor textarea {
                height: 120px;
            }
            
            .shader-editor.expanded textarea {
                height: 250px;
            }
        }
        
                 @media screen and (max-width: 768px) {
             body {
                 padding-top: 50px;
                 padding-bottom: 40px; /* Keep taskbar visible */
             }
             
             .mobile-menu-toggle {
                 display: block;
             }
             
             #ui, #gltf-ui {
                 position: fixed;
                 top: 50px;
                 left: 0;
                 right: 0;
                 width: calc(100vw - 20px);
                 max-width: none;
                 min-width: none;
                 margin: 0 10px;
                 max-height: calc(100vh - 130px); /* Account for top menu + taskbar */
                 transform: translateX(-100%);
                 transition: transform 0.3s ease;
                 z-index: 1600;
             }
             
             #ui.mobile-visible, #gltf-ui.mobile-visible {
                 transform: translateX(0);
             }
             
             #gltf-ui {
                 top: calc(50vh + 5px);
                 max-height: calc(50vh - 65px); /* Account for taskbar */
             }
             
             #ui {
                 max-height: calc(50vh - 65px); /* Account for taskbar */
             }
             
             /* Mobile taskbar adjustments */
             .taskbar {
                 height: 35px; /* Slightly smaller on mobile */
             }
             
             .start-button {
                 width: 90px;
                 font-size: 10px;
             }
             
             .start-button .start-icon {
                 width: 20px;
                 height: 20px;
             }
             
             .taskbar-apps {
                 left: 95px;
                 right: 100px;
             }
             
             .system-tray {
                 width: 95px;
             }
             
             .app-button {
                 font-size: 9px;
                 height: 28px;
                 max-width: 120px;
             }
            
            .resize-handle {
                display: none;
            }
            
            .control-group {
                flex-direction: column;
                align-items: stretch;
                gap: 2px;
            }
            
            .control-group label {
                min-width: auto;
                margin-bottom: 2px;
            }
            
            .quick-actions {
                gap: 2px;
            }
            
            .quick-actions .small-button {
                min-width: 50px;
                font-size: 8px;
                padding: 2px 4px;
            }
            
            .panel-tab {
                font-size: 9px;
                padding: 2px 6px;
            }
            
            .shader-editor textarea {
                height: 100px;
                font-size: 9px;
            }
            
            .shader-editor.expanded textarea {
                height: 200px;
            }
        }
        
        @media screen and (max-width: 480px) {
            .title-bar {
                font-size: 10px;
                padding: 2px 4px;
            }
            
            .section-title {
                font-size: 10px;
            }
            
            .button, .small-button {
                font-size: 9px;
                padding: 1px 4px;
            }
            
            .info-box {
                font-size: 9px;
                padding: 3px;
            }
            
            .model-info {
                font-size: 9px;
                padding: 3px;
            }
            
            .material-list {
                max-height: 80px;
            }
            
            .drag-drop-zone {
                padding: 15px;
                font-size: 9px;
            }
            
            .control-group input[type="range"] {
                min-width: 60px;
            }
        }
        
        /* Touch-friendly adjustments */
        @media (hover: none) and (pointer: coarse) {
            .small-button, .button {
                min-height: 32px;
                padding: 6px 8px;
            }
            
            .window-button {
                width: 24px;
                height: 20px;
                line-height: 18px;
            }
            
            .collapsible {
                min-height: 32px;
                padding: 4px 0;
            }
            
            .material-item {
                min-height: 32px;
                line-height: 32px;
                padding: 0 8px;
            }
            
                         .panel-tab {
                 min-height: 28px;
                 line-height: 24px;
                 padding: 2px 12px;
             }
         }
         
         /* Windows XP Taskbar */
         .taskbar {
             position: fixed;
             bottom: 0;
             left: 0;
             right: 0;
             height: 40px;
             background: linear-gradient(to bottom, #245edb 0%, #1941a5 3%, #1237a5 4%, #1e4ec8 8%, #3464d1 14%, #1a44b8 17%, #1a44b8 25%, #1a40b6 30%, #1138a4 50%, #0d2e86 51%, #194ec8 83%, #245edb 100%);
             border-top: 1px solid #0d2c7a;
             z-index: 2500;
             font-family: "Tahoma", sans-serif;
             font-size: 11px;
         }
         
         .start-button {
             position: absolute;
             left: 0;
             top: 3px;
             bottom: 3px;
             width: 110px;
             background: linear-gradient(to bottom, #2d5016 0%, #5ba028 50%, #4a7f20 100%);
             border: 1px outset #5ba028;
             border-radius: 0 8px 8px 0;
             color: white;
             font-weight: bold;
             display: flex;
             align-items: center;
             padding: 0 8px;
             cursor: pointer;
             box-shadow: inset 1px 1px 1px rgba(255,255,255,0.3);
         }
         
         .start-button:hover {
             background: linear-gradient(to bottom, #3e6b1e 0%, #6fb030 50%, #5a9028 100%);
         }
         
         .start-button:active {
             border: 1px inset #5ba028;
             box-shadow: inset 1px 1px 3px rgba(0,0,0,0.3);
         }
         
         .start-button .start-icon {
             width: 24px;
             height: 24px;
             margin-right: 6px;
             background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"><circle cx="12" cy="12" r="10" fill="%23ff6b35"/><circle cx="12" cy="12" r="8" fill="%23ffd23f"/><rect x="8" y="8" width="8" height="8" fill="%23ff6b35"/><rect x="10" y="10" width="4" height="4" fill="%23fff"/></svg>') center/contain no-repeat;
         }
         
         .taskbar-apps {
             position: absolute;
             left: 115px;
             right: 120px;
             top: 3px;
             bottom: 3px;
             background: linear-gradient(to bottom, #1e4ec8 0%, #1237a5 50%, #0d2e86 100%);
             border: 1px inset #245edb;
         }
         
         .app-button {
             float: left;
             height: 32px;
             padding: 0 8px;
             margin: 1px;
             background: linear-gradient(to bottom, #245edb 0%, #1237a5 50%, #0d2e86 100%);
             border: 1px outset #245edb;
             color: white;
             font-size: 10px;
             display: flex;
             align-items: center;
             cursor: pointer;
             max-width: 160px;
             overflow: hidden;
             white-space: nowrap;
         }
         
         .app-button:hover {
             background: linear-gradient(to bottom, #3464d1 0%, #1941a5 50%, #194ec8 100%);
         }
         
         .app-button.active {
             background: linear-gradient(to bottom, #0d2e86 0%, #1237a5 50%, #245edb 100%);
             border: 1px inset #245edb;
         }
         
         .app-button .app-icon {
             width: 16px;
             height: 16px;
             margin-right: 4px;
             background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16"><rect width="16" height="16" fill="%23ece9d8"/><rect x="2" y="2" width="12" height="12" fill="%230054e3"/></svg>') center/contain no-repeat;
         }
         
         .system-tray {
             position: absolute;
             right: 0;
             top: 3px;
             bottom: 3px;
             width: 115px;
             background: linear-gradient(to bottom, #1e4ec8 0%, #1237a5 50%, #0d2e86 100%);
             border: 1px inset #245edb;
             display: flex;
             align-items: center;
             justify-content: space-between;
             padding: 0 5px;
         }
         
         .system-icons {
             display: flex;
             gap: 3px;
         }
         
         .system-icon {
             width: 16px;
             height: 16px;
             cursor: pointer;
             opacity: 0.8;
         }
         
         .system-icon:hover {
             opacity: 1;
         }
         
         .system-icon.volume {
             background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16"><path d="M2,6 L6,6 L10,2 L10,14 L6,10 L2,10 Z" fill="%23fff"/><path d="M12,4 Q14,6 14,8 Q14,10 12,12" stroke="%23fff" stroke-width="1" fill="none"/></svg>') center/contain no-repeat;
         }
         
         .system-icon.network {
             background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16"><rect x="2" y="12" width="2" height="2" fill="%23fff"/><rect x="5" y="10" width="2" height="4" fill="%23fff"/><rect x="8" y="8" width="2" height="6" fill="%23fff"/><rect x="11" y="6" width="2" height="8" fill="%23fff"/></svg>') center/contain no-repeat;
         }
         
         .system-icon.antivirus {
             background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16"><path d="M8,2 L12,6 L8,14 L4,6 Z" fill="%2300ff00"/><path d="M6,7 L7,8 L10,5" stroke="%23000" stroke-width="1" fill="none"/></svg>') center/contain no-repeat;
         }
         
         .taskbar-clock {
             color: white;
             font-size: 10px;
             text-align: center;
             min-width: 45px;
             background: transparent;
             border: none;
             cursor: default;
         }
         
         .taskbar-clock .time {
             display: block;
             font-weight: bold;
         }
         
                   .taskbar-clock .date {
              display: block;
              font-size: 9px;
              opacity: 0.9;
          }
          
          /* Windows XP Start Menu Styles */
          .start-menu {
              position: fixed;
              bottom: 40px;
              left: 0;
              width: 400px;
              height: 500px;
              background: linear-gradient(to right, #245ddb 0%, #3a6ea5 50%, #ece9d8 50%, #ece9d8 100%);
              border: 2px outset #ece9d8;
              border-bottom: none;
              box-shadow: 2px 0 10px rgba(0,0,0,0.5);
              z-index: 2000;
              display: flex;
              font-family: "Tahoma", sans-serif;
              font-size: 11px;
          }
          
          .start-menu-left {
              width: 50%;
              background: linear-gradient(to bottom, #245ddb 0%, #3a6ea5 100%);
              color: white;
              padding: 8px;
              display: flex;
              flex-direction: column;
          }
          
          .start-menu-right {
              width: 50%;
              background: #ece9d8;
              padding: 8px 4px;
              display: flex;
              flex-direction: column;
          }
          
          .start-user {
              display: flex;
              align-items: center;
              margin-bottom: 15px;
              padding: 8px;
              background: rgba(255,255,255,0.1);
              border-radius: 3px;
          }
          
          .user-avatar {
              width: 32px;
              height: 32px;
              background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><circle cx="12" cy="8" r="4" fill="%23ffffff"/><path d="M12 14c-6 0-8 2-8 6h16c0-4-2-6-8-6z" fill="%23ffffff"/></svg>') center/contain no-repeat;
              margin-right: 8px;
              border: 1px solid rgba(255,255,255,0.3);
              border-radius: 2px;
          }
          
          .user-name {
              font-weight: bold;
              font-size: 11px;
          }
          
          .user-domain {
              font-size: 9px;
              opacity: 0.8;
          }
          
          .start-programs {
              flex: 1;
              padding: 5px 0;
          }
          
          .start-item {
              display: flex;
              align-items: center;
              padding: 6px 8px;
              cursor: pointer;
              border-radius: 2px;
              transition: background-color 0.1s;
              position: relative;
              font-size: 11px;
              white-space: nowrap;
          }
          
          .start-menu-left .start-item:hover {
              background: rgba(255,255,255,0.2);
          }
          
          .start-menu-right .start-item:hover {
              background: #316ac5;
              color: white;
          }
          
          .start-icon {
              width: 16px;
              height: 16px;
              margin-right: 8px;
              flex-shrink: 0;
          }
          
          .arrow {
              margin-left: auto;
              font-size: 8px;
          }
          
          .start-separator {
              height: 1px;
              background: rgba(255,255,255,0.3);
              margin: 8px 4px;
          }
          
          .start-menu-right .start-separator {
              background: #999;
          }
          
          .logout-item {
              background: #ff6b6b;
              color: white !important;
              border-radius: 3px;
              margin-top: 5px;
          }
          
          .logout-item:hover {
              background: #ff5252 !important;
          }
          
          /* Start Menu Icons */
          .new-icon { background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><rect x="2" y="2" width="12" height="12" fill="none" stroke="%23ffffff" stroke-width="2"/><path d="M8 5v6M5 8h6" stroke="%23ffffff" stroke-width="2"/></svg>') center/contain no-repeat; }
          .recent-icon { background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><circle cx="8" cy="8" r="6" fill="none" stroke="%23ffffff" stroke-width="2"/><path d="M8 4v4l3 2" stroke="%23ffffff" stroke-width="1.5"/></svg>') center/contain no-repeat; }
          .library-icon { background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><rect x="2" y="4" width="12" height="8" fill="none" stroke="%23ffffff" stroke-width="1.5"/><rect x="4" y="2" width="8" height="2" fill="%23ffffff"/><rect x="6" y="6" width="4" height="4" fill="%23ffffff"/></svg>') center/contain no-repeat; }
          .search-icon { background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><circle cx="6.5" cy="6.5" r="4" fill="none" stroke="%23ffffff" stroke-width="2"/><path d="M10 10l4 4" stroke="%23ffffff" stroke-width="2"/></svg>') center/contain no-repeat; }
          .programs-icon { background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><rect x="2" y="3" width="5" height="4" fill="%23ffffff"/><rect x="9" y="3" width="5" height="4" fill="%23ffffff"/><rect x="2" y="9" width="5" height="4" fill="%23ffffff"/><rect x="9" y="9" width="5" height="4" fill="%23ffffff"/></svg>') center/contain no-repeat; }
          
          .import-icon { background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M8 2v8M5 7l3 3 3-3" stroke="%23000000" stroke-width="2" fill="none"/><rect x="2" y="12" width="12" height="2" fill="%23000000"/></svg>') center/contain no-repeat; }
          .settings-icon { background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><circle cx="8" cy="8" r="3" fill="none" stroke="%23000000" stroke-width="1.5"/><path d="M8 1v2M8 13v2M15 8h-2M3 8H1M13.66 3.34l-1.41 1.41M4.75 11.25l-1.41 1.41M13.66 12.66l-1.41-1.41M4.75 4.75L3.34 3.34" stroke="%23000000" stroke-width="1.5"/></svg>') center/contain no-repeat; }
          .help-icon { background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><circle cx="8" cy="8" r="6" fill="none" stroke="%23000000" stroke-width="2"/><path d="M6 6a2 2 0 014 0c0 1-1 1.5-2 2" stroke="%23000000" stroke-width="1.5" fill="none"/><circle cx="8" cy="12" r="1" fill="%23000000"/></svg>') center/contain no-repeat; }
          .window-icon { background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><rect x="2" y="3" width="6" height="5" fill="none" stroke="%23000000" stroke-width="1.5"/><rect x="6" y="6" width="6" height="5" fill="none" stroke="%23000000" stroke-width="1.5"/><rect x="4" y="8" width="6" height="5" fill="none" stroke="%23000000" stroke-width="1.5"/></svg>') center/contain no-repeat; }
          .bookmark-icon { background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M4 2v12l4-3 4 3V2z" fill="none" stroke="%23000000" stroke-width="2"/><circle cx="8" cy="6" r="1" fill="%23000000"/></svg>') center/contain no-repeat; }
          .about-icon { background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><circle cx="8" cy="8" r="6" fill="none" stroke="%23000000" stroke-width="2"/><path d="M8 4v4M8 10v1" stroke="%23000000" stroke-width="2"/></svg>') center/contain no-repeat; }
          .fullscreen-icon { background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M2 4V2h2M14 2v2h-2M14 12v2h-2M2 12v2h2" stroke="%23ffffff" stroke-width="2" fill="none"/><rect x="5" y="5" width="6" height="6" fill="none" stroke="%23ffffff" stroke-width="1.5"/></svg>') center/contain no-repeat; }
          
          /* Start Menu Submenu */
          .start-submenu {
              position: absolute;
              left: 100%;
              bottom: 100px;
              width: 250px;
              background: #ece9d8;
              border: 2px outset #ece9d8;
              box-shadow: 2px 2px 5px rgba(0,0,0,0.3);
              padding: 5px;
              max-height: 400px;
              overflow-y: auto;
          }
          
          .submenu-section {
              margin-bottom: 8px;
          }
          
          .submenu-title {
              font-weight: bold;
              font-size: 10px;
              color: #0054e3;
              padding: 4px 8px;
              border-bottom: 1px solid #ccc;
              margin-bottom: 3px;
          }
          
          .submenu-section .start-item {
              padding: 4px 15px;
              font-size: 10px;
          }
         
         /* Notepad Styles */
         .notepad-textarea {
             width: 100%;
             height: 180px;
             background: white;
             color: black;
             border: 2px inset #ece9d8;
             font-family: "Courier New", monospace;
             font-size: 10px;
             padding: 5px;
             box-sizing: border-box;
             resize: vertical;
             min-height: 120px;
             max-height: 300px;
             line-height: 1.4;
         }
         
         .notepad-textarea:focus {
             background: #fff;
             outline: none;
             border: 2px inset #316ac5;
         }
         
         .notepad-toolbar {
             margin-bottom: 5px;
             border-bottom: 1px solid #999;
             padding-bottom: 3px;
         }
         
         .notepad-status {
             display: flex;
             justify-content: space-between;
             align-items: center;
             margin-top: 3px;
             padding-top: 3px;
             border-top: 1px solid #ddd;
             font-size: 9px;
             color: #666;
         }
         
         /* Optimizer Styles */
         .optimizer-grid {
             display: grid;
             grid-template-columns: 1fr 1fr;
             gap: 5px;
             margin: 5px 0;
         }
         
         .optimizer-stat {
             background: #f8f8f8;
             border: 1px inset #ece9d8;
             padding: 3px;
             font-size: 9px;
             text-align: center;
         }
         
         .optimizer-stat .label {
             font-weight: bold;
             color: #0054e3;
         }
         
         .optimizer-stat .value {
             display: block;
             margin-top: 2px;
         }
         
         .optimization-progress {
             width: 100%;
             height: 12px;
             background: #f0f0f0;
             border: 1px inset #ece9d8;
             margin: 5px 0;
             position: relative;
             overflow: hidden;
         }
         
         .optimization-progress-bar {
             height: 100%;
             background: linear-gradient(to right, #0054e3, #316ac5);
             width: 0%;
             transition: width 0.3s ease;
         }
         
         .optimization-progress-text {
             position: absolute;
             top: 0;
             left: 0;
             right: 0;
             bottom: 0;
             display: flex;
             align-items: center;
             justify-content: center;
             font-size: 8px;
             font-weight: bold;
             color: #333;
         }
         
                   /* File input for notepad */
          .hidden-file-input {
              display: none;
          }
          
          /* Windows XP App Windows */
          .app-window {
              position: absolute;
              width: 500px;
              height: 400px;
              background: #ece9d8;
              border: 2px outset #ece9d8;
              box-shadow: 2px 2px 5px rgba(0,0,0,0.5);
              z-index: 1000;
              resize: both;
              overflow: hidden;
              min-width: 300px;
              min-height: 200px;
          }
          
          .window-titlebar {
              background: linear-gradient(to bottom, #0054e3 0%, #0a439c 100%);
              color: white;
              padding: 3px 5px;
              font-size: 11px;
              font-weight: bold;
              cursor: move;
              display: flex;
              justify-content: space-between;
              align-items: center;
              user-select: none;
          }
          
          .window-title {
              white-space: nowrap;
              overflow: hidden;
              text-overflow: ellipsis;
          }
          
          .window-controls {
              display: flex;
              gap: 2px;
          }
          
          .window-button {
              width: 16px;
              height: 14px;
              background: #c0c0c0;
              border: 1px outset #c0c0c0;
              font-size: 8px;
              cursor: pointer;
              display: flex;
              align-items: center;
              justify-content: center;
              color: #000;
              font-weight: bold;
          }
          
          .window-button:hover {
              background: #d4d0c8;
          }
          
          .window-button:active {
              border: 1px inset #c0c0c0;
              background: #b8b8b8;
          }
          
          .window-content {
              padding: 5px;
              height: calc(100% - 22px);
              overflow-y: auto;
              scrollbar-width: thin;
              scrollbar-color: #c0c0c0 #ece9d8;
          }
          
          .window-content::-webkit-scrollbar {
              width: 16px;
              background: #ece9d8;
          }
          
          .window-content::-webkit-scrollbar-track {
              background: #ece9d8;
              border: 1px inset #ece9d8;
          }
          
          .window-content::-webkit-scrollbar-thumb {
              background: linear-gradient(to bottom, #dfdfdf 0%, #c0c0c0 50%, #a0a0a0 100%);
              border: 1px outset #c0c0c0;
          }
          
          .window-content::-webkit-scrollbar-button {
              height: 16px;
              background: #c0c0c0;
              border: 1px outset #c0c0c0;
          }
          
          /* App Icons on Taskbar */
          .notepad-icon {
              background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><rect x="2" y="1" width="12" height="14" fill="%23ffffff" stroke="%23000000"/><line x1="2" y1="4" x2="14" y2="4" stroke="%23000000"/><line x1="5" y1="7" x2="11" y2="7" stroke="%23000000"/><line x1="5" y1="9" x2="11" y2="9" stroke="%23000000"/><line x1="5" y1="11" x2="11" y2="11" stroke="%23000000"/></svg>') center/contain no-repeat;
          }
          
          .optimizer-icon {
              background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><circle cx="8" cy="8" r="6" fill="none" stroke="%23000000" stroke-width="2"/><path d="M8 3v10M3 8h10" stroke="%23000000" stroke-width="1.5"/><circle cx="8" cy="8" r="2" fill="%23000000"/></svg>') center/contain no-repeat;
          }
          
          .shaderbrowser-icon {
              background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><rect x="2" y="2" width="12" height="10" fill="none" stroke="%23000000" stroke-width="1.5"/><rect x="4" y="4" width="3" height="2" fill="%23000000"/><rect x="9" y="4" width="3" height="2" fill="%23000000"/><rect x="4" y="8" width="3" height="2" fill="%23000000"/><rect x="9" y="8" width="3" height="2" fill="%23000000"/><circle cx="14" cy="14" r="1" fill="%23000000"/></svg>') center/contain no-repeat;
          }
          
          /* Window positioning */
          #notepad-window {
              top: 50px;
              left: 100px;
          }
          
          #optimizer-window {
              top: 80px;
              left: 150px;
          }
          
          #shaderbrowser-window {
              top: 60px;
              left: 200px;
              width: 600px;
              height: 500px;
          }
          
          /* Optimizer Layout for Windows */
          .optimizer-layout {
              display: grid;
              grid-template-columns: 1fr 1fr;
              gap: 15px;
              height: calc(100% - 40px);
          }
          
          .optimizer-column {
              overflow-y: auto;
          }
          
          .optimizer-options {
              max-height: calc(100% - 40px);
              overflow-y: auto;
          }
          
          /* Shader Browser Styles */
          .shader-browser-toolbar {
              display: flex;
              flex-direction: column;
              gap: 8px;
              margin-bottom: 10px;
              padding: 8px;
              background: #f0f0f0;
              border: 1px inset #ece9d8;
          }
          
          .search-box {
              display: flex;
              gap: 5px;
          }
          
          .search-box input {
              flex: 1;
              padding: 4px;
              border: 1px inset #ece9d8;
              font-size: 10px;
          }
          
          .search-box button {
              padding: 4px 8px;
              background: #e1e1e1;
              border: 1px outset #e1e1e1;
              cursor: pointer;
              font-size: 8px;
          }
          
          .filter-buttons {
              display: flex;
              gap: 3px;
              flex-wrap: wrap;
          }
          
          .filter-btn {
              padding: 3px 8px;
              background: #e1e1e1;
              border: 1px outset #e1e1e1;
              cursor: pointer;
              font-size: 9px;
              border-radius: 2px;
          }
          
          .filter-btn.active {
              background: #316ac5;
              color: white;
              border: 1px inset #316ac5;
          }
          
          .filter-btn:hover:not(.active) {
              background: #d4d0c8;
          }
          
          .shader-list {
              height: 250px;
              overflow-y: auto;
              border: 1px inset #ece9d8;
              background: white;
              margin-bottom: 10px;
          }
          
          .shader-item {
              display: flex;
              align-items: center;
              padding: 6px;
              border-bottom: 1px solid #eee;
              cursor: pointer;
              transition: background-color 0.1s;
          }
          
          .shader-item:hover {
              background: #e6f3ff;
          }
          
          .shader-item.selected {
              background: #316ac5;
              color: white;
          }
          
          .shader-thumbnail {
              width: 40px;
              height: 30px;
              background: linear-gradient(45deg, #ccc 25%, transparent 25%, transparent 75%, #ccc 75%, #ccc),
                          linear-gradient(45deg, #ccc 25%, transparent 25%, transparent 75%, #ccc 75%, #ccc);
              background-size: 8px 8px;
              background-position: 0 0, 4px 4px;
              border: 1px solid #999;
              margin-right: 8px;
              flex-shrink: 0;
          }
          
          .shader-info {
              flex: 1;
          }
          
          .shader-name {
              font-weight: bold;
              font-size: 10px;
              margin-bottom: 2px;
          }
          
          .shader-category {
              font-size: 8px;
              color: #666;
              text-transform: uppercase;
          }
          
          .shader-item.selected .shader-category {
              color: #ccc;
          }
          
          .shader-preview-area {
              background: #f0f0f0;
              border: 1px inset #ece9d8;
              padding: 8px;
              border-radius: 2px;
          }
          
          .preview-info {
              margin-bottom: 8px;
          }
          
          .preview-info strong {
              font-size: 11px;
              color: #0054e3;
          }
          
          .preview-info p {
              font-size: 9px;
              color: #666;
              margin: 3px 0 0 0;
          }
          
          .preview-actions {
              display: flex;
              gap: 5px;
              flex-wrap: wrap;
          }
          
          .preview-actions .button {
              font-size: 9px;
              padding: 4px 8px;
          }
          
          /* Mobile window adjustments */
          @media screen and (max-width: 768px) {
              .app-window {
                  width: calc(100vw - 20px);
                  height: calc(100vh - 100px);
                  top: 10px !important;
                  left: 10px !important;
              }
              
              .optimizer-layout {
                  grid-template-columns: 1fr;
                  gap: 10px;
              }
              
              .notepad-textarea {
                  height: 150px;
              }
          }
    </style>
</head>
<body>
    <!-- Your HTML content remains unchanged -->
    
    <!-- Use Vite's entry point instead of directly loading scripts -->
    <script type="module" src="./main.js"></script>
</body>
</html> 